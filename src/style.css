/* ---------- RESET MINIMO ---------- */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; color: #0f172a; background: #f8fafc; }

/* ---------- LAYOUT APP ---------- */
.app-container { max-width: 960px; margin: 0 auto; padding: 16px; }
.app-header { display: flex; justify-content: center; margin-bottom: 16px; }

/* ---------- SEARCH BAR ---------- */
.search-bar { position: relative; width: 100%; max-width: 560px; }
.search-bar input[type="search"] {
  width: 100%; padding: 12px 40px 12px 12px; border: 1px solid #e2e8f0; border-radius: 12px; background: #fff; outline: none;
}
.search-bar input[type="search"]:focus { border-color: #94a3b8; box-shadow: 0 0 0 3px rgba(148,163,184,.25); }
.clear-search {
  position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
  width: 28px; height: 28px; border: none; border-radius: 50%; background: #e2e8f0; color: #0f172a; cursor: pointer; line-height: 1;
}
.clear-search:hover { background: #cbd5e1; }

/* ---------- LISTA POESIE ---------- */
.poesie-list { display: grid; grid-template-columns: repeat( auto-fill, minmax(260px, 1fr) ); gap: 12px; }
.poesia-card {
  background: #fff; border: 1px solid #e2e8f0; border-radius: 16px; padding: 14px; cursor: pointer; transition: transform .1s ease, box-shadow .1s ease, border-color .1s ease;
}
.poesia-card:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(2,6,23,.08); border-color: #cbd5e1; }
.poesia-card h3 { margin: 0 0 6px; font-size: 1.05rem; }
.poesia-card .author { margin: 0 0 8px; color: #475569; font-size: .9rem; }
.poesia-card .preview { margin: 0; color: #334155; opacity: .9; }

/* ---------- STATI ---------- */
.loader, .empty-state, .error-message { text-align: center; padding: 16px; }
.loader { color: #475569; }
.empty-state { color: #64748b; }
.error-message { color: #b91c1c; background: #fef2f2; border: 1px solid #fecaca; border-radius: 12px; }
.error-message button {
  margin-left: 8px; padding: 8px 12px; border-radius: 10px; border: 1px solid #ef4444; background: #ef4444; color: #fff; cursor: pointer;
}
.error-message button:hover { filter: brightness(0.95); }

/* ---------- PAGINA POESIA ---------- */
.poetry-page { display: grid; gap: 16px; }
.back-button {
  display: inline-flex; align-items: center; gap: 8px;
  background: #e2e8f0; color: #0f172a; border: 1px solid #cbd5e1; border-radius: 12px; padding: 8px 12px; cursor: pointer;
}
.back-button:hover { background: #cbd5e1; }
.poetry-header h1 { margin: 0; font-size: clamp(1.4rem, 2.4vw, 2rem); }
.poetry-header .author { margin: 4px 0 0; color: #475569; }

.poetry-content { display: grid; gap: 16px; }
.poetry-text {
  background: #fff; border: 1px solid #e2e8f0; border-radius: 16px; padding: 14px; overflow: auto;
}
.poetry-text pre { margin: 0; white-space: pre-wrap; word-break: break-word; }

/* ---------- AUDIO SECTION ---------- */
.audio-section {
  background: #fff; border: 1px solid #e2e8f0; border-radius: 16px; padding: 14px; display: grid; gap: 12px;
}
.audio-status { font-size: .95rem; color: #334155; }
.progress-indicator { position: relative; height: 8px; background: #f1f5f9; border-radius: 999px; overflow: hidden; margin-top: 8px; }
.progress-indicator .progress-bar { height: 100%; background: #0ea5e9; transition: width .2s linear; }

/* Buttons gruppo */
.audio-options { display: flex; flex-wrap: wrap; gap: 8px; }
.listen-button, .audio-download-link, .stop-button, .play-button, .back-button {
  display: inline-flex; align-items: center; gap: 8px; text-decoration: none;
}

/* ---------- AUDIO PLAYER MODAL ---------- */
.audio-player-modal {
  position: sticky; top: 8px;
  background: #fff; border: 1px solid #e2e8f0; border-radius: 16px; padding: 12px; display: grid; gap: 10px;
}
.audio-controls { display: grid; grid-template-columns: 1fr; gap: 8px; }
@media (min-width: 560px) {
  .audio-controls { grid-template-columns: auto auto 1fr auto; align-items: center; }
}

.play-button, .stop-button, .audio-download-link {
  border: 1px solid #cbd5e1; background: #e2e8f0; color: #0f172a; padding: 8px 12px; border-radius: 12px; cursor: pointer;
}
.play-button:hover, .stop-button:hover, .audio-download-link:hover { background: #cbd5e1; }

.speed-controls { display: inline-flex; align-items: center; gap: 6px; font-size: .9rem; color: #334155; }
.speed-button {
  border: 1px solid #cbd5e1; background: #fff; color: #0f172a; padding: 6px 10px; border-radius: 999px; cursor: pointer;
}
.speed-button:hover { background: #f1f5f9; }
.speed-button.active { background: #0ea5e9; border-color: #0284c7; color: #fff; }

.progress-bar { position: relative; height: 8px; background: #f1f5f9; border-radius: 999px; overflow: hidden; }
.progress-fill { position: absolute; left: 0; top: 0; bottom: 0; width: 0%; background: #22c55e; transition: width .15s linear; }

.audio-error { color: #b91c1c; background: #fef2f2; border: 1px solid #fecaca; padding: 8px; border-radius: 12px; }

/* ---------- HIGHLIGHT TESTO & GLOW ---------- */
.content-highlight {
  max-height: 40vh; overflow: auto; padding: 10px; border: 1px dashed #cbd5e1; border-radius: 12px; background: #f8fafc;
  line-height: 1.75;
}
.content-highlight .word { padding: 2px 0; transition: background-color .12s ease, box-shadow .12s ease; }
.content-highlight .word.highlight { background: #fff7ed; box-shadow: 0 0 0 2px #fed7aa inset; border-radius: 6px; }
.content-highlight .word.glow { text-shadow: 0 0 6px rgba(250, 204, 21, 0.65); }

/* ---------- SEZIONI ANALISI ---------- */
.analysis-sections { display: grid; gap: 16px; }
.analysis-section {
  background: #fff; border: 1px solid #e2e8f0; border-radius: 16px; padding: 14px;
}
.analysis-section h2 { margin: 0 0 10px; font-size: 1.1rem; }
.analysis-section h4, .analysis-section h5 { margin: 6px 0; }

/* ---------- ACCESSIBILITÃ€ ---------- */
.progress-bar[role="progressbar"] { outline: none; }
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* ---------- DARK MODE (opzionale semplice) ---------- */
@media (prefers-color-scheme: dark) {
  body { background: #0b1220; color: #e2e8f0; }
  .poesia-card, .poetry-text, .audio-section, .audio-player-modal, .analysis-section {
    background: #0f172a; border-color: #1e293b;
  }
  .search-bar input[type="search"] { background: #0f172a; color: #e2e8f0; border-color: #1e293b; }
  .clear-search { background: #1f2937; color: #e2e8f0; }
  .play-button, .stop-button, .audio-download-link { background: #1f2937; color: #e2e8f0; border-color: #334155; }
  .speed-button { background: #0f172a; color: #e2e8f0; border-color: #334155; }
  .content-highlight { background: #0b1324; border-color: #1e293b; }
  .content-highlight .word.highlight { background: #1e293b; box-shadow: 0 0 0 2px #334155 inset; }
}
